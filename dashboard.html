<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - MindSpace Kenya</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dashboard-body">

  <!-- Top Navigation -->
<!-- TOP RIGHT PROFILE WITH EDIT MODAL -->
<header class="main-header">
  <div class="container nav-container">
    <div class="logo">MindSpace Kenya</div>
    
    <nav class="main-nav">
      <a href="dashboard.html" class="active">Dashboard</a>
      <a href="therapy.html">Therapy</a>
      <a href="ai-assistant.html">AI Assistant</a>
      <a href="community.html">Community</a>
      <!-- Inside the dropdown menu, add this line -->
<a href="#" onclick="toggleDarkMode()">Dark Mode</a>
    </nav>

    <!-- PROFILE DROPDOWN -->
    <div class="profile-dropdown">
      <div class="profile-trigger" onclick="toggleDropdown()">
        <img id="headerPic" src="" alt="Profile" class="header-pic">
        <div class="user-info">
          <span id="headerName">User</span>
          <small id="headerUsername">@username</small>
        </div>
        <span class="dropdown-arrow">Down Arrow</span>
      </div>

   <div id="dropdownMenu" class="dropdown-menu">
  <a href="#" onclick="openEditModal(); return false;">Edit Profile</a>
  <a href="#" onclick="toggleDarkMode()">Dark Mode</a>
  <a href="#" onclick="logout()">Logout</a>
</div>
<!-- EDIT PROFILE MODAL -->
<div id="editProfileModal" class="profile-modal">
  <div class="profile-modal-content">
    <span class="close-modal" onclick="closeEditModal()">Ã—</span>
    <h2>Edit Your Profile</h2>
    
    <div style="text-align:center;margin:1.5rem 0;">
      <img id="modalPicPreview" src="" class="big-profile-pic">
      <div class="profile-options" style="margin-top:1rem;">
        <div class="pic-option" onclick="changePic('https://images.pexels.com/photos/6646919/pexels-photo-6646919.jpeg')"><img src="https://images.pexels.com/photos/6646919/pexels-photo-6646919.jpeg"></div>
        <div class="pic-option" onclick="changePic('https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg')"><img src="https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg"></div>
        <div class="pic-option" onclick="changePic('https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg')"><img src="https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg"></div>
        <div class="pic-option" onclick="changePic('https://images.pexels.com/photos/762020/pexels-photo-762020.jpeg')"><img src="https://images.pexels.com/photos/762020/pexels-photo-762020.jpeg"></div>
      </div>
    </div>

    <div class="input-group">
      <label>Full Name</label>
      <input type="text" id="editName" placeholder="Your full name">
    </div>
    <div class="input-group">
      <label>Username</label>
      <input type="text" id="editUsername" placeholder="@yourusername">
    </div>
    <div class="input-group">
      <label>Phone Number</label>
      <input type="tel" id="editPhone" placeholder="0712345678" maxlength="10">
    </div>

    <button onclick="saveProfileChanges()" class="primary-btn" style="width:100%;margin-top:1rem;">
      Save Changes
    </button>
  </div>
</div>
  <main class="dashboard-main">
    <div class="container">
      <div class="welcome-section">
        <h1>Hello <span id="userName">Friend</span>! <span style="color:#10b981;">Welcome Back</span></h1>
        <p>How are you feeling today?</p>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="action-card" onclick="location.href='therapy.html'">
          <h3>Book Session</h3>
          <p>Talk to your therapist</p>
        </div>
        <div class="action-card" onclick="location.href='ai-assistant.html'">
          <h3>AI Assistant</h3>
          <p>Get instant support</p>
        </div>
        <div class="action-card" onclick="location.href='community.html'">
          <h3>Community</h3>
          <p>Connect with others</p>
        </div>
      </div>

      <!-- Mood Chart & Appointments -->
      <div class="grid-2">
        <div class="chart-card">
          <h2>Your Mood This Week</h2>
          <canvas id="moodChart"></canvas>
        </div>
        <div class="appointments-card">
          <h2>Upcoming Sessions</h2>
          <ul id="appointmentList"></ul>
          <button onclick="location.href='therapy.html'">Book New Session</button>
        </div>
      </div>
    </div>
  </main>

  <script src="js/app.js"></script>
  <script>
    function toggleDropdown() {
      document.getElementById('dropdownMenu').classList.toggle('show');
    }
    window.onclick = function(e) {
      if (!e.target.matches('.profile-trigger') && !e.target.matches('.header-pic') && !e.target.matches('.dropdown-arrow')) {
        document.getElementById('dropdownMenu').classList.remove('show');
      }
    }
  </script>
</body>
</html>
